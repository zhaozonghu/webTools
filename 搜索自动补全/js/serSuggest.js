function searchSuggestObj(d){var b=$(".ser_kws");var g=$("#S_V");var c="";var f=function(){b.bind("keyup",function(i){if(i.keyCode==40||i.keyCode==38){e(i)}else{var h=i.timeStamp;setTimeout(function(){if(h-i.timeStamp==0){e(i)}},500)}})};var a=function(){g.hide()};var e=function(k){k.stopPropagation();if(g.css("display")=="block"&&k.keyCode==38||k.keyCode==40){var l=g.find("a.hover");if(k.keyCode==38){if(l.length>0){var n=l.removeClass("hover").prev();if(n.length>0){n.addClass("hover");b.val(n.find("em").html())}}else{var j=g.find("a:last");j.addClass("hover");b.val(j.find("em").html())}}else{if(k.keyCode==40){if(l.length>0){var i=l.removeClass("hover").next();if(i.length>0){i.addClass("hover");b.val(i.find("em").html())}}else{var m=g.find("a:first");m.addClass("hover");b.val(m.find("em").html())}}}}else{var h=$.trim(b.val());d(h);c=h}};this.dataDisplay=function(k){if(k.length<=0){g.hide();return}var h;var l=document.createDocumentFragment();g.html("");for(var j=0;j<k.length;j++){h=document.createElement("a");h.innerHTML="<em>"+k[j].name+"</em><span>"+k[j].type+"</span>";l.appendChild(h)}g.show();g.append(l);$(document).bind("keyup",function(i){if(i.keyCode==13){g.hide();setTimeout(function(){$("#serFrm").submit()},500)}});g.find("a").hover(function(){g.find("a").removeClass("hover");$(this).addClass("hover")},function(){$(this).removeClass("hover")}).bind("click",function(){console.log($(this).find("em").html());b.val($(this).find("em").html());g.hide();setTimeout(function(){$("#serFrm").submit()},500)});$(document).click(function(i){if(i.target!=b[0]){g.hide()}})};f()}function sendKeyWordBack(a){$.ajax({type:"POST",url:"http://www.15video.tv/getSuggest.php?kw="+encodeURIComponent(a),async:true,dataType:"json",success:function(d){var b=[];for(var c=0;c<d.length;c++){if(d[c].name!=""){b.push(d[c])}}searchSuggestObj.dataDisplay(b)}})}var searchSuggestObj=new searchSuggestObj(sendKeyWordBack);
